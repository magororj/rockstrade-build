(this["webpackJsonpe-commerce"]=this["webpackJsonpe-commerce"]||[]).push([[0],{38:function(e,a,t){e.exports=t(73)},43:function(e,a,t){},65:function(e,a,t){},71:function(e,a,t){},73:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(34),s=t.n(c),l=(t(43),t(21)),i=t(8),o=t.n(i),m=t(13),u=t(16),d=t(17),h=t(19),v=t(18),p=t(10),E=t(1),f=t(14),g=t.n(f),b=t(35),N=r.a.createContext({}),y=function(e){return function(a){return r.a.createElement(N.Consumer,null,(function(t){return r.a.createElement(e,Object.assign({},a,{context:t}))}))}},C=function(e){var a=e.cartItem,t=e.cartKey,n=a.coin;return r.a.createElement("div",{className:" column is-half"},r.a.createElement("div",{className:"box"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("figure",{className:"image is-64x64"},r.a.createElement("img",{src:n.image,alt:"crypto"}))),r.a.createElement("div",{className:"media-content"},r.a.createElement("b",{style:{textTransform:"capitalize"}},n.name," ",r.a.createElement("span",{className:"tag is-primary"},"$",n.current_price)),r.a.createElement("div",null,n.shortDesc)),r.a.createElement("div",{className:"media-right",onClick:function(){return e.removeFromCart(t)}},r.a.createElement("span",{className:"delete is-large"})))))},x=t(15),k=t(36),O=(t(62),y((function(e){var a=Object.values(e.cart)[0].coin.id,t=Object(n.useState)({}),c=Object(x.a)(t,2),s=(c[0],c[1]),l=Object(n.useState)(!1),i=Object(x.a)(l,2),u=i[0],d=i[1];Object(n.useEffect)((function(){(function(){var e=Object(m.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,g.a.get("https://api.coingecko.com/api/v3/coins/".concat(a,"/market_chart/"),{params:{vs_currency:"brl",days:"7",interval:"daily"}}).then((function(e){s({market:e}),console.log(e.data)})).catch((function(e){return console.log(e)}));case 3:d(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),console.log(e.cartKeys),console.log(a)}),[e.cartKeys]);return r.a.createElement("div",null,r.a.createElement("h1",null,"History Chart"),u?r.a.createElement("div",{className:"is-align-content-center"}," Loading..."):r.a.createElement(k.a,{data:[{name:"BitCoin",data:{"2013-02-10":3,"2013-02-17":3,"2013-02-24":3,"2013-03-03":1,"2013-03-10":4,"2013-03-17":3,"2013-03-24":2,"2013-03-31":3}},{name:"Ethereum",data:{"2013-02-10":0,"2013-02-17":0,"2013-02-24":0,"2013-03-03":0,"2013-03-10":2,"2013-03-17":1,"2013-03-24":0,"2013-03-31":0}},{name:"Tether",data:{"2013-02-10":0,"2013-02-17":1,"2013-02-24":0,"2013-03-03":0,"2013-03-10":0,"2013-03-17":1,"2013-03-24":0,"2013-03-31":1}}],height:"200px",curve:!1,download:!0}))}))),S=(t(65),y((function(e){var a=e.context.cart,t=Object.keys(a||{});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"hero is-primary"},r.a.createElement("div",{className:"hero-body container"},r.a.createElement("h4",{className:"title"},"Coins Selected "))),r.a.createElement("br",null),r.a.createElement("div",{className:"container historychart"},t.length?r.a.createElement(O,{cart:a,cartKeys:t}):null),r.a.createElement("div",{className:"container"},t.length?r.a.createElement("div",{className:"column columns is-multiline"},t.map((function(t){return r.a.createElement(C,{cartKey:t,key:t,cartItem:a[t],removeFromCart:e.context.removeFromCart})})),r.a.createElement("div",{className:"column is-12 is-clearfix"},r.a.createElement("br",null),r.a.createElement("div",{className:"is-pulled-right"},r.a.createElement("button",{onClick:e.context.clearCart,className:"button is-warning"},"Clear selection")," ",r.a.createElement("button",{onClick:e.context.checkout,className:"button is-success"},"Nada ainda definido")))):r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"title has-text-grey-light"},"No Coins selected."))))}))),j=t(12),w=y(function(e){Object(h.a)(t,e);var a=Object(v.a)(t);function t(e){var n;return Object(u.a)(this,t),(n=a.call(this,e)).handleChange=function(e){var a;return n.setState((a={},Object(j.a)(a,e.target.name,e.target.value),Object(j.a)(a,"error",""),a))},n.login=function(e){e.preventDefault();var a=n.state,t=a.username,r=a.password;if(!t||!r)return n.setState({error:"Preencha todos os campos!"});n.props.context.login(t,r).then((function(e){e||n.setState({error:"Credenciais incorretas"})}))},n.state={username:"",password:""},n}return Object(d.a)(t,[{key:"render",value:function(){return this.props.context.user?r.a.createElement(E.a,{to:"/coins-search"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"hero is-success "},r.a.createElement("div",{className:"hero-body container"},r.a.createElement("h4",{className:"title "},"Login"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.login},r.a.createElement("div",{className:"columns is-mobile is-centered"},r.a.createElement("div",{className:"column is-one-third"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email: "),r.a.createElement("input",{className:"input",type:"email",name:"username",onChange:this.handleChange})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Password: "),r.a.createElement("input",{className:"input",type:"password",name:"password",onChange:this.handleChange})),this.state.error&&r.a.createElement("div",{className:"has-text-danger"},this.state.error),r.a.createElement("div",{className:"field is-clearfix"},r.a.createElement("button",{className:"button is-primary is-outlined is-pulled-right"},"Submit"))))))}}]),t}(n.Component)),T=function(e){var a=e.coin;return r.a.createElement("div",{className:" column is-half"},r.a.createElement("div",{className:"box"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("figure",{className:"image is-64x64"},r.a.createElement("img",{src:a.image,alt:"crypto"}))),r.a.createElement("div",{className:"media-content"},r.a.createElement("b",{style:{textTransform:"capitalize"}},a.name," ",r.a.createElement("span",{className:"tag is-primary"},"$",a.price)),r.a.createElement("div",null,a.shortDesc),r.a.createElement("div",{className:"is-clearfix"},r.a.createElement("button",{className:"button is-small is-outlined is-primary   is-pulled-right",onClick:function(){return e.addToCart({id:a.name,coin:a,amount:1})}},"Add to Cart"))))))},I=(t(71),y((function(e){var a=e.context.coins,t=Object(n.useState)(""),c=Object(x.a)(t,2),s=c[0],l=c[1],i=a.filter((function(e){return e.name.toLowerCase().includes(s.toLowerCase())}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"hero is-primary"},r.a.createElement("div",{className:"hero-body container"},r.a.createElement("h4",{className:"title"},"Search Coins"),r.a.createElement("form",null,r.a.createElement("input",{className:"coin-input",type:"text",onChange:function(e){l(e.target.value)},placeholder:"Search"})))),r.a.createElement("br",null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"column columns is-multiline"},i&&i.length?i.map((function(a,t){return r.a.createElement(T,{coin:a,key:t,addToCart:e.context.addToCart})})):r.a.createElement("div",{className:"column"},r.a.createElement("span",{className:"title has-text-grey-light"},"No coins found")))))}))),F=function(e){Object(h.a)(t,e);var a=Object(v.a)(t);function t(e){var n;return Object(u.a)(this,t),(n=a.call(this,e)).addToCart=function(e){var a=n.state.cart;Object.keys(n.state.cart).length>=3?alert("Just only 3 coins to compair"):a[e.id]=e,localStorage.setItem("cart",JSON.stringify(a)),n.setState({cart:a})},n.removeFromCart=function(e){var a=n.state.cart;delete a[e],localStorage.setItem("cart",JSON.stringify(a)),n.setState({cart:a})},n.clearCart=function(){localStorage.removeItem("cart"),n.setState({cart:{}})},n.checkout=function(){if(n.state.user){n.state.cart;n.clearCart()}else n.routerRef.current.history.push("/login")},n.login=function(){var e=Object(m.a)(o.a.mark((function e(a,t){var r,c,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("http://localhost:3001/login",{email:a,password:t}).catch((function(e){return{status:401,message:"N\xe3o Autorizado"}}));case 2:if(200!==(r=e.sent).status){e.next=11;break}return c=Object(b.a)(r.data.accessToken),s=c.email,l={email:s,token:r.data.accessToken,accessLevel:"admin@example.com"===s?0:1},n.setState({user:l}),localStorage.setItem("user",JSON.stringify(l)),e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),n.logout=function(e){e.preventDefault(),n.setState({user:null}),localStorage.removeItem("user")},n.state={user:null,cart:{},coins:[]},n.routerRef=r.a.createRef(),n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(o.a.mark((function e(){var a,t,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("user"),t=localStorage.getItem("cart"),e.next=4,g.a.get("https://api.coingecko.com/api/v3/coins/markets?vs_currency=brl&order=market_cap_desc&page=1&sparkline=false").then((function(e){n.setState({coins:e.data})})).catch((function(e){return console.log(e)}));case 4:a=a?JSON.parse(a):null,t=t?JSON.parse(t):{},this.setState({user:a,cart:t});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(N.Provider,{value:Object(l.a)(Object(l.a)({},this.state),{},{removeFromCart:this.removeFromCart,addToCart:this.addToCart,login:this.login,clearCart:this.clearCart,checkout:this.checkout})},r.a.createElement(p.a,{ref:this.routerRef},r.a.createElement("div",{className:"App"},r.a.createElement("nav",{className:"navbar container",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("b",{className:"navbar-item is-size-4 has-text-success-dark"},"Rock's Trader"),r.a.createElement("label",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:function(a){a.preventDefault(),e.setState({showMenu:!e.state.showMenu})}},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{className:"navbar-menu ".concat(this.state.showMenu?"is-active":"")},r.a.createElement(p.b,{to:"/coins-search",className:"navbar-item"},"Coins"),r.a.createElement(p.b,{to:"/cart",className:"navbar-item"},"Coins Selected",r.a.createElement("span",{className:"tag is-primary",style:{marginLeft:"5px"}},Object.keys(this.state.cart).length)),this.state.user?r.a.createElement(p.b,{to:"/",onClick:this.logout,className:"navbar-item"},"Logout"):r.a.createElement(p.b,{to:"/login",className:"navbar-item"},"Login"))),r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/",component:w}),r.a.createElement(E.b,{exact:!0,path:"/login",component:w}),r.a.createElement(E.b,{exact:!0,path:"/cart",component:S}),r.a.createElement(E.b,{exact:!0,path:"/coins-search",component:I})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(72);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.7ac966f7.chunk.js.map